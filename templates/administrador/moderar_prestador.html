{% extends "publico/base2.html" %}
{% block css %} <link rel="stylesheet" href="/static/css/moderar_prestador.css">{% endblock %}
{% block titulo %}Moderação de Prestadores{% endblock %}
{% block conteudo %}
<main class="container-fluid p-0">
    <section class="hero-section">
        <div class="container">
            <div class="text-center">
                <h1 class="hero-title">
                    <i class="bi bi-person-check me-3"></i>
                    Moderação de Prestadores
                </h1>
                <p class="hero-subtitle">Gerencie prestadores, verifique dados e modere denúncias</p>
            </div>
        </div>
    </section>

    <section class="container">
        <div class="estatisticas">
            <div class="row">
                <div class="col-lg-2 col-md-4 col-6">
                    <div class="estatistica-item">
                        <span class="estatistica-numero" id="totalPrestadores">89</span>
                        <span class="estatistica-label">Total</span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-6">
                    <div class="estatistica-item">
                        <span class="estatistica-numero text-warning" id="pendentes">12</span>
                        <span class="estatistica-label">Pendentes</span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-6">
                    <div class="estatistica-item">
                        <span class="estatistica-numero text-success" id="aprovados">65</span>
                        <span class="estatistica-label">Aprovados</span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-6">
                    <div class="estatistica-item">
                        <span class="estatistica-numero text-danger" id="rejeitados">7</span>
                        <span class="estatistica-label">Rejeitados</span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-6">
                    <div class="estatistica-item">
                        <span class="estatistica-numero" style="color: #fd7e14;" id="advertidos">3</span>
                        <span class="estatistica-label">Advertidos</span>
                    </div>
                </div>
                <div class="col-lg-2 col-md-4 col-6">
                    <div class="estatistica-item">
                        <span class="estatistica-numero" style="color: #6f42c1;" id="banidos">2</span>
                        <span class="estatistica-label">Banidos</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="filtros-section">
        <div class="container">
            <div class="search-container">
                <div class="row g-3">
                    <div class="col-lg-4">
                        <input type="text" class="search-input" id="buscarPrestador" placeholder="Buscar por nome, CPF ou serviço...">
                    </div>
                    <div class="col-lg-2">
                        <select class="filtro-select form-select" id="filtroStatus">
                            <option value="">Todos os Status</option>
                            <option value="pendente">Pendentes</option>
                            <option value="aprovado">Aprovados</option>
                            <option value="rejeitado">Rejeitados</option>
                            <option value="advertido">Advertidos</option>
                            <option value="banido">Banidos</option>
                        </select>
                    </div>
                    <div class="col-lg-2">
                        <select class="filtro-select form-select" id="filtroDenuncias">
                            <option value="">Todas as Denúncias</option>
                            <option value="com_denuncias">Com Denúncias</option>
                            <option value="sem_denuncias">Sem Denúncias</option>
                        </select>
                    </div>
                    <div class="col-lg-2">
                        <select class="filtro-select form-select" id="filtroData">
                            <option value="">Todas as Datas</option>
                            <option value="hoje">Hoje</option>
                            <option value="semana">Esta Semana</option>
                            <option value="mes">Este Mês</option>
                        </select>
                    </div>
                    <div class="col-lg-2">
                        <button class="btn btn-primary w-100" onclick="aplicarFiltros()">
                            <i class="bi bi-funnel me-2"></i>Filtrar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="prestadores-section">
        <div class="container">
            <div id="listaPrestadores">
                <div class="prestador-card pendente" data-status="pendente" data-denuncias="0">
                    <div class="prestador-header">
                        <h3 class="prestador-nome">João da Silva Serviços Gerais</h3>
                        <span class="prestador-status status-pendente">Pendente</span>
                    </div>
                    <div class="prestador-info">
                        <div class="info-item">
                            <i class="bi bi-person"></i>
                            <span>CPF: 123.456.789-00</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-calendar"></i>
                            <span>Cadastro: 28/01/2025</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-geo-alt"></i>
                            <span>São Paulo, SP</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-hammer"></i>
                            <span>Serviço: Eletricista</span>
                        </div>
                    </div>
                    <div class="prestador-dados">
                        <div class="dados-row">
                            <span class="dados-label">Serviços:</span>
                            <span class="dados-valor">Eletricista, Encanador, Pintor</span>
                        </div>
                        <div class="dados-row">
                            <span class="dados-label">Email:</span>
                            <span class="dados-valor">joao@email.com</span>
                        </div>
                        <div class="dados-row">
                            <span class="dados-label">Documentos:</span>
                            <span class="dados-valor">
                                <span class="documento-status doc-pendente">2 Pendentes</span>
                            </span>
                        </div>
                    </div>
                    <div class="prestador-acoes">
                        <button class="btn btn-detalhes" onclick="verDetalhes(1)">
                            <i class="bi bi-eye me-1"></i>Detalhes
                        </button>
                        <button class="btn btn-aprovar" onclick="aprovarPrestador(1)">
                            <i class="bi bi-check-lg me-1"></i>Aprovar
                        </button>
                        <button class="btn btn-rejeitar" onclick="rejeitarPrestador(1)">
                            <i class="bi bi-x-lg me-1"></i>Rejeitar
                        </button>
                    </div>
                </div>

                <div class="prestador-card aprovado" data-status="aprovado" data-denuncias="2">
                    <div class="prestador-header">
                        <h3 class="prestador-nome">Maria Santos Reparos Rápidos</h3>
                        <div class="d-flex gap-2 align-items-center">
                            <span class="denuncias-badge">2 Denúncias</span>
                            <span class="prestador-status status-aprovado">Aprovado</span>
                        </div>
                    </div>
                    <div class="prestador-info">
                        <div class="info-item">
                            <i class="bi bi-person"></i>
                            <span>CPF: 987.654.321-00</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-calendar"></i>
                            <span>Cadastro: 15/01/2025</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-geo-alt"></i>
                            <span>Rio de Janeiro, RJ</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-hammer"></i>
                            <span>Serviço: Encanador</span>
                        </div>
                    </div>
                    <div class="prestador-dados">
                        <div class="dados-row">
                            <span class="dados-label">Serviços:</span>
                            <span class="dados-valor">Encanador, Reparos Hidráulicos</span>
                        </div>
                        <div class="dados-row">
                            <span class="dados-label">Avaliação:</span>
                            <span class="dados-valor">⭐⭐⭐☆☆ (3.5/5.0)</span>
                        </div>
                        <div class="dados-row">
                            <span class="dados-label">Documentos:</span>
                            <span class="dados-valor">
                                <span class="documento-status doc-verificado">Verificados</span>
                            </span>
                        </div>
                    </div>
                    <div class="prestador-acoes">
                        <button class="btn btn-detalhes" onclick="verDetalhes(2)">
                            <i class="bi bi-eye me-1"></i>Detalhes
                        </button>
                        <button class="btn btn-advertir" onclick="advertirPrestador(2)">
                            <i class="bi bi-exclamation-triangle me-1"></i>Advertir
                        </button>
                        <button class="btn btn-banir" onclick="banirPrestador(2)">
                            <i class="bi bi-ban me-1"></i>Banir
                        </button>
                    </div>
                </div>

                <div class="prestador-card advertido" data-status="advertido" data-denuncias="1">
                    <div class="prestador-header">
                        <h3 class="prestador-nome">Serviços Express</h3>
                        <div class="d-flex gap-2 align-items-center">
                            <span class="advertencias-badge">1 Advertência</span>
                            <span class="prestador-status status-advertido">Advertido</span>
                        </div>
                    </div>
                    <div class="prestador-info">
                        <div class="info-item">
                            <i class="bi bi-person"></i>
                            <span>CPF: 111.222.333-44</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-calendar"></i>
                            <span>Cadastro: 10/01/2025</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-geo-alt"></i>
                            <span>Belo Horizonte, MG</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-hammer"></i>
                            <span>Serviço: Limpeza</span>
                        </div>
                    </div>
                    <div class="prestador-dados">
                        <div class="dados-row">
                            <span class="dados-label">Serviços:</span>
                            <span class="dados-valor">Limpeza Residencial e Comercial</span>
                        </div>
                        <div class="dados-row">
                            <span class="dados-label">Última Advertência:</span>
                            <span class="dados-valor">25/01/2025 - Má conduta</span>
                        </div>
                        <div class="dados-row">
                            <span class="dados-label">Documentos:</span>
                            <span class="dados-valor">
                                <span class="documento-status doc-verificado">Verificados</span>
                            </span>
                        </div>
                    </div>
                    <div class="prestador-acoes">
                        <button class="btn btn-detalhes" onclick="verDetalhes(3)">
                            <i class="bi bi-eye me-1"></i>Detalhes
                        </button>
                        <button class="btn btn-banir" onclick="banirPrestador(3)">
                            <i class="bi bi-ban me-1"></i>Banir
                        </button>
                    </div>
                </div>

                <div class="prestador-card aprovado" data-status="aprovado" data-denuncias="0">
                    <div class="prestador-header">
                        <h3 class="prestador-nome">Pedro Lopes Jardinagem</h3>
                        <span class="prestador-status status-aprovado">Aprovado</span>
                    </div>
                    <div class="prestador-info">
                        <div class="info-item">
                            <i class="bi bi-person"></i>
                            <span>CPF: 555.666.777-88</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-calendar"></i>
                            <span>Cadastro: 05/01/2025</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-geo-alt"></i>
                            <span>Curitiba, PR</span>
                        </div>
                        <div class="info-item">
                            <i class="bi bi-hammer"></i>
                            <span>Serviço: Jardinagem</span>
                        </div>
                    </div>
                    <div class="prestador-dados">
                        <div class="dados-row">
                            <span class="dados-label">Serviços:</span>
                            <span class="dados-valor">Jardinagem, Paisagismo, Poda de Árvores</span>
                        </div>
                        <div class="dados-row">
                            <span class="dados-label">Avaliação:</span>
                            <span class="dados-valor">⭐⭐⭐⭐⭐ (5.0/5.0)</span>
                        </div>
                        <div class="dados-row">
                            <span class="dados-label">Documentos:</span>
                            <span class="dados-valor">
                                <span class="documento-status doc-verificado">Verificados</span>
                            </span>
                        </div>
                    </div>
                    <div class="prestador-acoes">
                        <button class="btn btn-detalhes" onclick="verDetalhes(4)">
                            <i class="bi bi-eye me-1"></i>Detalhes
                        </button>
                    </div>
                </div>
            </div>

            <nav class="paginacao">
                <ul class="pagination">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1">Anterior</a>
                    </li>
                    <li class="page-item active">
                        <a class="page-link" href="#">1</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" href="#">2</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" href="#">3</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" href="#">Próximo</a>
                    </li>
                </ul>
            </nav>
        </div>
    </section>
</main>

<div class="modal fade" id="modalDetalhes" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-info-circle me-2"></i>
                    Detalhes do Prestador
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="modalDetalhesContent">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                <div id="modalAcoes">
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalConfirmacao" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalConfirmacaoTitulo">Confirmar Ação</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p id="modalConfirmacaoTexto"></p>
                <div id="motivoContainer" style="display: none;">
                    <label for="motivoAcao" class="form-label">Motivo:</label>
                    <textarea class="form-control" id="motivoAcao" rows="3" placeholder="Descreva o motivo da ação..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" id="btnConfirmarAcao">Confirmar</button>
            </div>
        </div>
    </div>
</div>

{% block scripts %} <script src="/static/js/moderar_prestador.js"></script> {% endblock %}
{% endblock %}
