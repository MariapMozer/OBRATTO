{% extends "publico/base.html" %}

{% block titulo %}Erro no Servidor{% endblock %}

{% block css %}
<style>
    .error-container {
        padding: 4rem 1rem;
        text-align: center;
    }

    .error-code {
        font-size: 8rem;
        font-weight: 700;
        line-height: 1;
        margin-bottom: 0.5rem;
        color: #dc3545;
    }

    .error-heading {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
    }

    .error-details {
        font-size: 1.1rem;
        margin-bottom: 2rem;
    }

    .error-actions {
        margin-top: 2rem;
    }

    .error-technical-details {
        text-align: left;
        margin-top: 3rem;
    }

    .error-technical-details pre {
        max-height: 400px;
        overflow-y: auto;
        font-size: 0.875rem;
    }

    @media (max-width: 768px) {
        .error-code {
            font-size: 5rem;
        }

        .error-heading {
            font-size: 1.5rem;
        }
    }
</style>
{% endblock %}

{% block conteudo %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
            <div class="error-container">
                <h1 class="error-code">{{ error_code or 500 }}</h1>
                <h2 class="error-heading">Ops! Algo deu errado</h2>
                <div class="error-details">
                    <p class="text-muted">
                        {% if error_message %}
                        {{ error_message }}
                        {% else %}
                        Ocorreu um erro interno no servidor. Nossa equipe já foi notificada e está trabalhando para resolver
                        o problema.
                        {% endif %}
                    </p>
                    <p class="text-muted">
                        Por favor, tente novamente em alguns instantes.
                    </p>
                </div>
                <div class="error-actions">
                    <a href="javascript:history.back()" class="btn btn-secondary btn-lg me-2">
                        <i class="bi bi-arrow-left"></i> Voltar
                    </a>
                    <a href="/" class="btn btn-primary btn-lg">
                        <i class="bi bi-house-door"></i> Ir para Página Inicial
                    </a>
                </div>

                {% if error_details %}
                <div class="error-technical-details">
                    <div class="alert alert-warning text-start" role="alert">
                        <h5 class="alert-heading">
                            <i class="bi bi-exclamation-triangle-fill"></i>
                            Detalhes Técnicos (Modo Development)
                        </h5>
                        <hr>
                        <p><strong>Tipo:</strong> {{ error_details.type }}</p>

                        {% if error_details.message %}
                        <p><strong>Mensagem:</strong> {{ error_details.message }}</p>
                        {% endif %}

                        {% if error_details.detail %}
                        <p><strong>Detalhe:</strong> {{ error_details.detail }}</p>
                        {% endif %}

                        <p><strong>Endpoint:</strong> {{ error_details.method }} {{ error_details.path }}</p>

                        {% if error_details.ip %}
                        <p><strong>IP:</strong> {{ error_details.ip }}</p>
                        {% endif %}

                        {% if error_details.errors %}
                        <p><strong>Erros de Validação:</strong></p>
                        <pre class="bg-light p-3 rounded"><code>{{ error_details.errors | tojson(indent=2) }}</code></pre>
                        {% endif %}

                        {% if error_details.body %}
                        <p><strong>Body:</strong></p>
                        <pre class="bg-light p-3 rounded"><code>{{ error_details.body }}</code></pre>
                        {% endif %}

                        {% if error_details.traceback %}
                        <p><strong>Traceback:</strong></p>
                        <pre class="bg-light p-3 rounded overflow-auto"><code>{{ error_details.traceback }}</code></pre>
                        {% endif %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
