{% extends "prestador/base.html" %}

{% block prestador_titulo %}Meus Serviços{% endblock %}
{% block sidebar_active %}meus_servicos{% endblock %}

{% block prestador_conteudo %}

<style>
    .status {
        font-size: 0.85rem;
        padding: 3px 8px;
        border-radius: 5px;
        font-weight: 600;
    }
    .status-concluido {
        background-color: #2a9d8f;
        color: #fff;
    }
    .status-andamento {
        background-color: #457b9d;
        color: #fff;
    }
    .status-pendente {
        background-color: #e76f51;
        color: #fff;
    }
    .service-card:hover {
        transform: scale(1.01);
        transition: 0.2s;
    }
    .placeholder-img {
        height: 180px;
        background: #e9ecef;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #6c757d;
        font-size: 1.2rem;
        font-weight: bold;
    }
</style>

<div class="container py-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Meus Serviços</h2>

        <a href="/prestador/servicos/novo" class="btn btn-primary">
            + Adicionar Serviço
        </a>
    </div>

    <div class="row g-4">

        {% for item in servicos %}
        {% set s = item.servico %}
        {% set foto = item.foto_principal %}

        <div class="col-md-6 col-lg-4">
            <div class="card shadow-sm service-card">

                {% if foto %}
                    <img src="/static/uploads/{{ foto }}" 
                         class="card-img-top" 
                         style="height:180px; object-fit:cover;">
                {% else %}
                    <div class="placeholder-img">
                        Sem imagem
                    </div>
                {% endif %}

                <div class="card-body">

                    <h5 class="card-title">{{ s.titulo }}</h5>

                    <p class="card-text text-muted">
                        {{ s.descricao[:120] }}{% if s.descricao|length > 120 %}...{% endif %}
                    </p>

                    <div class="d-flex justify-content-between mt-3">
                        <span class="status status-andamento">Ativo</span>
                        <span class="text-muted">R$ {{ "%.2f"|format(s.valor_base) }}</span>
                    </div>

                    <a href="/prestador/servicos/{{ s.id_servico }}" 
                       class="btn btn-outline-primary btn-sm mt-3">
                        Ver detalhes
                    </a>

                </div>
            </div>
        </div>

        {% endfor %}

        {% if servicos|length == 0 %}
        <p class="text-muted">Nenhum serviço cadastrado ainda.</p>
        {% endif %}

    </div>

</div>

{% endblock %}
